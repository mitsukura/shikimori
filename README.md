# å››å­£å®ˆ (Shikimori) ğŸŒ¸â„ï¸ğŸƒğŸ‚

> å››å­£ã®é™¤é›ªã¨è‰åˆˆã‚Šã‚’æ‰‹è»½ã«ã€‚Next.js, Clerk, Supabase ã§æ§‹ç¯‰ã•ã‚ŒãŸåœ°åŸŸã‚µãƒãƒ¼ãƒˆã‚µãƒ¼ãƒ“ã‚¹

## ğŸ“‹ æ¦‚è¦

å››å­£å®ˆï¼ˆShikimoriï¼‰ã¯ã€ç§‹ç”°çœŒå†…ã‚’ä¸­å¿ƒã¨ã—ãŸé™¤é›ªãƒ»è‰åˆˆã‚Šã‚µãƒ¼ãƒ“ã‚¹ã®ã‚ªãƒ³ãƒ©ã‚¤ãƒ³äºˆç´„ãƒ»ç®¡ç†ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ ã§ã™ã€‚åœ°åŸŸä½æ°‘ã®é™¤é›ªãƒ»è‰åˆˆã‚Šã®è² æ‹…ã‚’è»½æ¸›ã—ã€ã‚µãƒ¼ãƒ“ã‚¹æä¾›æ¥­è€…ã¨ã®ãƒãƒƒãƒãƒ³ã‚°ã‚’åŠ¹ç‡åŒ–ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚

### ä¸»ãªæ©Ÿèƒ½
- ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘: ã‚µãƒ¼ãƒ“ã‚¹é–²è¦§ã€ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç®¡ç†ã€ãŠå•ã„åˆã‚ã›
- ç®¡ç†è€…å‘ã‘: ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ã€å•†å“ç®¡ç†ã€æ³¨æ–‡ç®¡ç†

## ğŸ–¼ï¸ ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆ/ãƒ‡ãƒ¢

<!-- ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ã‚·ãƒ§ãƒƒãƒˆã‚„ãƒ‡ãƒ¢GIFã‚’ã“ã“ã«è¿½åŠ  -->

## ğŸ› ï¸ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ãƒ»è¨€èª
![Next.js](https://img.shields.io/badge/Next.js-15-black?style=flat&logo=next.js)
![TypeScript](https://img.shields.io/badge/TypeScript-blue?style=flat&logo=typescript)
![React](https://img.shields.io/badge/React-19-blue?style=flat&logo=react)

### UI
![Tailwind CSS](https://img.shields.io/badge/Tailwind_CSS-38B2AC?style=flat&logo=tailwind-css&logoColor=white)
![shadcn/ui](https://img.shields.io/badge/shadcn/ui-black?style=flat)
![Radix UI](https://img.shields.io/badge/Radix_UI-black?style=flat)
![Lucide React](https://img.shields.io/badge/Lucide_React-icons-purple?style=flat)

### çŠ¶æ…‹ç®¡ç†/ãƒ•ã‚©ãƒ¼ãƒ 
![React Hook Form](https://img.shields.io/badge/React_Hook_Form-EC5990?style=flat)

### èªè¨¼/ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
![Clerk](https://img.shields.io/badge/Clerk-authentication-purple?style=flat)
![Supabase](https://img.shields.io/badge/Supabase-PostgreSQL-3ECF8E?style=flat&logo=supabase)
![Prisma](https://img.shields.io/badge/Prisma-ORM-2D3748?style=flat&logo=prisma)

### ãã®ä»–
![Bun](https://img.shields.io/badge/Bun-package_manager-F9F1E1?style=flat)
![Sonner](https://img.shields.io/badge/Sonner-notifications-blue?style=flat)
![date-fns](https://img.shields.io/badge/date--fns-date_utility-yellow?style=flat)
![svix](https://img.shields.io/badge/svix-webhooks-orange?style=flat)

## âœ¨ æ©Ÿèƒ½ä¸€è¦§

### ãƒ¦ãƒ¼ã‚¶ãƒ¼å‘ã‘æ©Ÿèƒ½
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ãƒ»ãƒ­ã‚°ã‚¤ãƒ³ (Clerk)
- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è¡¨ç¤ºãƒ»ç·¨é›†ãƒ»å‰Šé™¤
- ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆå•†å“ï¼‰ä¸€è¦§è¡¨ç¤º
- ã‚µãƒ¼ãƒ“ã‚¹è©³ç´°è¡¨ç¤º
- ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ 
- (å°†æ¥å®Ÿè£…äºˆå®š: ã‚µãƒ¼ãƒ“ã‚¹äºˆç´„ã€æ±ºæ¸ˆæ©Ÿèƒ½)

### ç®¡ç†è€…å‘ã‘æ©Ÿèƒ½
- ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ï¼ˆä¸€è¦§è¡¨ç¤ºã€è©³ç´°è¡¨ç¤ºï¼‰
- å•†å“ç®¡ç†ï¼ˆä¸€è¦§è¡¨ç¤ºã€CRUDæ“ä½œï¼‰

### å…±é€šæ©Ÿèƒ½
- ãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
shikimori/
â”œâ”€â”€ app/                  # Next.js App Routerã®ãƒ«ãƒ¼ãƒˆãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
â”‚   â”œâ”€â”€ api/              # APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ admin/            # ç®¡ç†è€…å‘ã‘ç”»é¢
â”‚   â”œâ”€â”€ profile/          # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«é–¢é€£ç”»é¢
â”‚   â””â”€â”€ components/       # ãƒšãƒ¼ã‚¸å›ºæœ‰ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”œâ”€â”€ components/           # å…±é€šUIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ (shadcn/uiãƒ™ãƒ¼ã‚¹)
â”œâ”€â”€ lib/                  # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ã€ãƒ˜ãƒ«ãƒ‘ãƒ¼é–¢æ•°ã€ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
â”œâ”€â”€ prisma/               # Prismaã‚¹ã‚­ãƒ¼ãƒã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€ã‚·ãƒ¼ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ public/               # é™çš„ãƒ•ã‚¡ã‚¤ãƒ« (ç”»åƒã€SVGãªã©)
â”œâ”€â”€ types/                # TypeScriptã®å‹å®šç¾©
â”œâ”€â”€ data/                 # ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ãªã©ã®é™çš„ãƒ‡ãƒ¼ã‚¿
â””â”€â”€ docs/                 # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ (ERå›³ãªã©)
```

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒ (ERå›³)

ä»¥ä¸‹ã¯ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã‚’ERå›³ã§è¡¨ã—ãŸã‚‚ã®ã§ã™ï¼š

```mermaid
erDiagram
    users ||--o{ orders : "æ³¨æ–‡"
    orders ||--|| maps : "ä½œæ¥­å ´æ‰€"
    orders ||--|| payments : "æ”¯æ‰•ã„"
    payments ||--o| refunds : "è¿”é‡‘"
    orders ||--o{ order_items : "å«ã‚€"
    order_items }o--|| items : "å‚ç…§"
    
    users {
        UUID id PK
        String clerk_id UK
        Boolean is_admin
        String first_name
        String last_name
        String email UK
        String phone
        String bio
        String address
        DateTime created_at
        DateTime updated_at
    }
    
    orders {
        UUID id PK
        UUID user_id FK
        UUID map_id FK
        UUID payment_id FK
        DateTime order_date
        String status
        DateTime created_at
        DateTime updated_at
    }
    
    maps {
        UUID id PK
        String address
        String name
        String image
        DateTime created_at
        DateTime updated_at
    }
    
    refunds {
        UUID id PK
        UUID payment_id FK
        Decimal amount
        DateTime refund_at
        DateTime created_at
        DateTime updated_at
    }
    
    payments {
        UUID id PK
        String method
        String status
        String stripe_intent_id
        Decimal stripe_authorized_amount
        String stripe_authorizer_id
        Decimal stripe_captured_amount
        DateTime stripe_captured_at
        DateTime created_at
        DateTime updated_at
    }
    
    items {
        UUID id PK
        String name
        String description
        Decimal price
        String image_url
        String category
        Boolean is_available
        Int stock
        DateTime created_at
        DateTime updated_at
    }
    
    order_items {
        UUID id PK
        UUID order_id FK
        UUID item_id FK
        Int quantity
        Decimal price_at_order
        DateTime created_at
        DateTime updated_at
    }
```

### ãƒ†ãƒ¼ãƒ–ãƒ«é–¢é€£å›³ã®èª¬æ˜

- **users**: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’ç®¡ç†ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã€‚Clerkèªè¨¼ã¨é€£æº
- **items**: æä¾›ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆå•†å“ï¼‰æƒ…å ±ã‚’ç®¡ç†ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«
- **orders**: æ³¨æ–‡æƒ…å ±ã‚’ç®¡ç†ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã€åœ°å›³ã€æ”¯æ‰•ã„æƒ…å ±ã¨é–¢é€£
- **maps**: ä½œæ¥­å ´æ‰€ã®æƒ…å ±ã‚’ç®¡ç†ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«
- **payments**: æ”¯æ‰•ã„æƒ…å ±ã‚’ç®¡ç†ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«
- **refunds**: è¿”é‡‘æƒ…å ±ã‚’ç®¡ç†ã™ã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«
- **order_items**: æ³¨æ–‡ã«å«ã¾ã‚Œã‚‹å•†å“ï¼ˆã‚µãƒ¼ãƒ“ã‚¹ï¼‰ã®ä¸­é–“ãƒ†ãƒ¼ãƒ–ãƒ«

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### å‰ææ¡ä»¶
- Node.js (v18ä»¥é™æ¨å¥¨)
- Bun (v1.x)
- Git

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †

1. **ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³**
```bash
git clone <repository-url>
cd shikimori
```

2. **ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
```bash
bun install
```

3. **ç’°å¢ƒå¤‰æ•°ã®è¨­å®š**
`.env.local` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¾ã™ï¼š
```
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=
CLERK_SECRET_KEY=
NEXT_PUBLIC_CLERK_SIGN_IN_URL=
NEXT_PUBLIC_CLERK_SIGN_UP_URL=
NEXT_PUBLIC_CLERK_AFTER_SIGN_IN_URL=
NEXT_PUBLIC_CLERK_AFTER_SIGN_UP_URL=
CLERK_WEBHOOK_SECRET=

NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=
DATABASE_URL=

# ä»»æ„: RLSãƒã‚¤ãƒ‘ã‚¹ç”¨
SUPABASE_SERVICE_ROLE_KEY=
```

4. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³**
```bash
bunx prisma migrate dev
```

5. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚·ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° (ä»»æ„)**
```bash
bunx prisma db seed
```

6. **é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•**
```bash
bun dev
```

7. **ã‚¢ã‚¯ã‚»ã‚¹**  
ãƒ–ãƒ©ã‚¦ã‚¶ã§ http://localhost:3000 ã‚’é–‹ãã¾ã™ã€‚

## ğŸ“ åˆ©ç”¨å¯èƒ½ãªã‚¹ã‚¯ãƒªãƒ—ãƒˆ

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã‚’èµ·å‹•
bun dev

# æœ¬ç•ªç”¨ã«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ãƒ“ãƒ«ãƒ‰
bun build

# ãƒ“ãƒ«ãƒ‰ã•ã‚ŒãŸã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’èµ·å‹•
bun start

# ESLintã‚’å®Ÿè¡Œã—ã¦ã‚³ãƒ¼ãƒ‰ã‚’ãƒã‚§ãƒƒã‚¯
bun lint

# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿ã‚’æŠ•å…¥
bunx prisma db seed
# ã¾ãŸã¯
bun db:seed
```

## ğŸŒ APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

- `/api/admin/users` - ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†API
- `/api/admin/items` - å•†å“ç®¡ç†API
- `/api/webhook/clerk` - Clerkèªè¨¼Webhook

## ğŸš¢ ãƒ‡ãƒ—ãƒ­ã‚¤

å››å­£å®ˆã¯ [Vercel Platform](https://vercel.com) ã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ã‚’æ¨å¥¨ã—ã¦ã„ã¾ã™ã€‚

### ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

1. [Vercel](https://vercel.com) ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆã—ã¾ã™ã€‚
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚
3. ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šã—ã¾ã™ï¼ˆã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †ã®ç’°å¢ƒå¤‰æ•°ã¨åŒã˜ï¼‰ã€‚
4. ãƒ‡ãƒ—ãƒ­ã‚¤ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¾ã™ã€‚

è©³ç´°ã¯ [Next.js ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://nextjs.org/docs/app/building-your-application/deploying) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

<!-- ãƒ©ã‚¤ã‚»ãƒ³ã‚¹æƒ…å ±ã‚’ã“ã“ã«è¿½åŠ  -->

---

å››å­£å®ˆ (Shikimori) - å››å­£ã‚’é€šã˜ã¦åœ°åŸŸã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ ğŸŒ¸â„ï¸ğŸƒğŸ‚
****